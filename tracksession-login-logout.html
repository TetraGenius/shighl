<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <title>Shighl</title>
  <script src="window/shighl.bundle.js"> </script>
</head>
<body>

  <h1>Shigh</h1>
  <h2>trackSession, Login, Logout</h2>
  Session : <span id="info"></span>
  <button id="login_btn" onclick="login()">Login</button>
  <button id="logout_btn" onclick="logout()">Logout</button>
  <br>

  <a href="index.html">Back to index</a> |
  <a href="https://github.com/scenaristeur/shighl/tree/master/dist/tracksession-login-logout.html" target="_blank">
    Source</a>
  </body>

  <script>
  // initialisation
  const sh = new Shighl()
  console.log(sh)
  sh.test()

  // trackSession / Login /logout
  const divinfo = document.getElementById("info")
  const login_btn = document.getElementById("login_btn")
  const logout_btn = document.getElementById("logout_btn")

  async function login(){
    const webId = await sh.login()
    afterLogin(webId)
  }

  async function logout(){
    await sh.logout()
    afterLogout()
  }

  function afterLogin(webId){
    alert("You are logged with "+webId)
  }

  function afterLogout(){
    alert("You are not logged")
  }

  function callbackSession(webId){
    if (webId != null){
      divinfo.innerHTML = webId
      login_btn.style.display = "none"
      logout_btn.style.display = "block"
    }else{
      divinfo.innerHTML = "No session look at https://solid.inrupt.com/get-a-solid-pod"
      login_btn
      login_btn.style.display = "block"
      logout_btn.style.display = "none"
    }

  }
  
  // run trackSession
  sh.trackSession(callbackSession)
</script>

</html>
